import{l,Y as c,o as d,c as m,e as t,d as i,f as _,Z as p}from"./index.4b3ec211.js";import{u as h}from"./useMutation.esm.a0bf0af9.js";const f={class:"add-issue"},b=t("h2",null,"Add Issue",-1),y=["onSubmit"],g=t("label",{for:"title"},"Title",-1),S=t("input",{type:"text",id:"title",placeholder:"Title",name:"title"},null,-1),v=t("label",{for:"comment"},"Comment",-1),x=t("textarea",{placeholder:"Comment",id:"comment",name:"comment"},null,-1),A=["disabled"],Q={__name:"AddIssue",setup(C){const o=l(),u=c(),{isLoading:s,mutate:a}=h(e=>fetch("/api/issues",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()),{onSuccess:e=>{o.invalidateQueries(["issues"],{exact:!0}),o.setQueryData(["issues",e.number.toString()],e),u.push(`/issue/${e.number}`)}});function r(e){s.value||a({comment:e.target.comment.value,title:e.target.title.value})}return(e,n)=>(d(),m("div",f,[b,t("form",{onSubmit:p(r,["prevent"])},[g,S,v,x,t("button",{type:"submit",disabled:i(s)},_(i(s)?"Adding Issue...":"Add Issue"),9,A)],40,y)]))}};export{Q as default};
